WEBVTT

1
00:00:00.020 --> 00:00:04.591
&gt；&gt；steve kinney：所以我们的工作就是清理这场油漆风暴。
&gt;&gt; Steve Kinney: So
our job is to clean up this paint storm.

2
00:00:04.591 --> 00:00:08.023
所以我们讨论了一下方法，然后我把你们都放在
So we kinda talked a little bit about
the approach before I cut you all loose to

3
00:00:08.023 --> 00:00:08.734
试试看。
give it a shot.

4
00:00:08.734 --> 00:00:11.914
也就是说，我们有一个CSS类，我们有一个转换，
Which is, we have a CSS class,
we have a transition,

5
00:00:11.914 --> 00:00:14.830
我们有所有基本的移动部件，对吧？
we have all the basic moving pieces,
right?

6
00:00:14.830 --> 00:00:19.329
我们能做的最简单的事情就是去掉一些jQuery，然后继续
The easiest thing we can do is get rid of
some of this jQuery and we'll go ahead and

7
00:00:19.329 --> 00:00:20.800
我们会拿到盒子的。
we'll get our hands on the box.

8
00:00:22.929 --> 00:00:25.373
我的意思是，我可以在jQuery中做这部分，我选择不做，
I mean, I could do this part in jQuery,
I'm choosing not to,

9
00:00:25.373 --> 00:00:29.899
没问题。&gt；&gt；steve kinney：和
it's fine.
&gt;&gt; Steve Kinney: And

10
00:00:29.899 --> 00:00:32.890
我们会抓住箱子的班级。
we'll grab the class of box.

11
00:00:32.890 --> 00:00:37.487
我们在这里做的第一步是我们可以说
And step one that we do
here is we could just say

12
00:00:37.487 --> 00:00:42.988
box.addEventListener(‘click’)。&gt；&gt；steve kinney：和
box.addEventListener('click').
&gt;&gt; Steve Kinney: And

13
00:00:42.988 --> 00:00:47.215
我们可以说box.classList，
we can say box.classList,

14
00:00:47.215 --> 00:00:51.213
我会用一个开关。
I'll go with a toggle.

15
00:00:51.213 --> 00:00:53.729
我认为，在这种情况下，或者谷歌，或者GOGLE。
I think, or Google, or
goggle in that case.

16
00:00:54.899 --> 00:00:56.527
是啊，你不是都很熟悉吗
Yeah, are you not all familiar with

17
00:00:56.527 --> 00:00:57.454
护目镜的方法？
the goggle method?

18
00:00:57.454 --> 00:00:58.871
&gt；&gt；[笑]&gt；&gt；Steve Kinney：好的。
&gt;&gt; [LAUGH]
&gt;&gt; Steve Kinney: Okay.

19
00:00:58.871 --> 00:01:03.869
[笑]我们将切换移动类。
[LAUGH] We'll toggle the move class.

20
00:01:05.269 --> 00:01:09.379
是的，我们不会得到我们自己的层和所有类似的东西，但是
Right, and we won't get our own layer and
everything like that, but

21
00:01:09.379 --> 00:01:10.039
这是个好的开始。
it's a good start.

22
00:01:10.039 --> 00:01:13.561
我们最终会得到我们自己的一层，它只是会在同一时间发生。
We will eventually get our own layer,
it's just gonna happen at the same time.

23
00:01:13.561 --> 00:01:14.539
我们去看看吧。
Let's go take a look.

24
00:01:16.180 --> 00:01:20.792
我会在这种情况下做油漆闪光，这样你就可以看到它闪光了。
I'm gonna do the paint flashing in
this case, so you can see It flashes.

25
00:01:20.792 --> 00:01:25.179
它在没有绿色痕迹的情况下移动，并且
It moves without having that
trail of green behind it, and

26
00:01:25.179 --> 00:01:27.423
然后它再次下降。
then it goes back down again.

27
00:01:27.423 --> 00:01:31.379
您可以看到油漆闪光灯VCR处于活动状态
You can see the paint
flash VCR is actively

28
00:01:31.379 --> 00:01:35.460
移动到它自己的层，对吗？
getting moved to it's own layer, right?

29
00:01:35.460 --> 00:01:39.319
它上升到它自己的一层，然后它移动，然后它又下降，
It's going up to it's own layer, then
it's moving, then it's going back down,

30
00:01:39.319 --> 00:01:40.870
因为过渡不再存在。
cuz the transition is no longer there.

31
00:01:43.090 --> 00:01:45.450
但如果我不需要同时做这件事，那就太好了。
But it would be great if I didn't
have to do that simultaneously.

32
00:01:45.450 --> 00:01:47.706
让我们也做一个录音非常快。
Let's also just do a recording real quick.

33
00:01:47.706 --> 00:01:50.021
让我们看看这里发生了什么，我要关掉油漆闪光。
Let's see what we've got going on here,
I'm gonna turn off the paint flashing.

34
00:01:58.746 --> 00:01:59.914
&gt；&gt；steve kinney：对，你可以看到，
&gt;&gt; Steve Kinney: Right, and you can see,

35
00:01:59.914 --> 00:02:01.260
我们有点击事件。
we've got the click event.

36
00:02:03.079 --> 00:02:04.090
这是不对的。
That's not right.

37
00:02:04.090 --> 00:02:06.926
有趣的事实是直到现在才咬到我，
Fun fact that actually
didn't bite me until now is,

38
00:02:06.926 --> 00:02:10.675
很多时候，如果你在Chrome中有干净的配置文件，你会过得更好。
a lot of times you're better off if
you have clean profile in Chrome.

39
00:02:10.675 --> 00:02:12.419
或者你在隐姓埋名的窗口里做，
Or you do it in an incognito window,

40
00:02:12.419 --> 00:02:16.021
因为有时候你会得到一些你的Chrome扩展
because sometimes you will get some of
your Chrome extension that are also

41
00:02:16.021 --> 00:02:20.371
自言自语。&gt；&gt；steve kinney：酷，所以
interjecting themselves.
&gt;&gt; Steve Kinney: Cool, so

42
00:02:20.371 --> 00:02:25.284
我们有事件侦听器。&gt；&gt；steve kinney：和
we have the event listener.
&gt;&gt; Steve Kinney: And

43
00:02:25.284 --> 00:02:26.355
它好像在移动。
it kind of moves across.

44
00:02:26.355 --> 00:02:30.926
但有一件事我想让你们首先注意，就是记得我给你们看的时候
But the one thing I want you to notice
first, is remember when I showed you all

45
00:02:30.926 --> 00:02:34.865
在我们做jQuery的时候在那里的那些中间帧？
of those intermediate frames in
there when we did the jQuery one?

46
00:02:34.865 --> 00:02:37.449
他们走了，对吧，因为是的，我们增加了一门课。
They're gone, right,
cuz yeah, we added a class.

47
00:02:37.449 --> 00:02:42.283
合成器线程都是关于移动的，我们基本上是沿着这一层滑动，
The compositor thread is all about moving,
we're basically sliding that layer along,

48
00:02:42.283 --> 00:02:44.290
然后再把它推回去。
and then pushing it back down again.

49
00:02:44.290 --> 00:02:47.961
但我们实际上不再需要在主线程上手动移动它了。
But we don't actually need to manually
move it on the main thread anymore.

50
00:02:47.961 --> 00:02:52.314
所以我们在这里什么都没有发生，这是非常酷的。
So we have nothing happening in here,
which is super cool.

51
00:02:52.314 --> 00:02:55.353
我们可以做得更好一些，比如更复杂的动画或
We could get a little bit better,
like for more complicated animations or

52
00:02:55.353 --> 00:02:56.872
当页面上有很多内容时，
when there is a lot going on the page,

53
00:02:56.872 --> 00:03:00.400
你可以口吃，因为你就像我必须重新粉刷才能得到它自己的层。
you could stutter as you're like I have to
repaint to get it up to it's own layer.

54
00:03:00.400 --> 00:03:02.027
对，那会阻挡一切，
Right, that's gonna block everything,

55
00:03:02.027 --> 00:03:04.400
它会阻止那条线上的其他东西。
it's gonna block other things
going on on that thread.

56
00:03:04.400 --> 00:03:06.000
所以我们可以说，嘿，当你不忙的时候，
So we can say, hey, when you're not busy,

57
00:03:06.000 --> 00:03:08.340
如果你能把它移到它自己的线程上，那就太好了。
if you could move that up to its
own thread, that'd be great.

58
00:03:08.340 --> 00:03:08.924
所以让我们继续
So let's go ahead and

59
00:03:08.924 --> 00:03:11.576
我们会实施的。&gt；&gt；Steve Kinney：所以
we'll implement that.
&gt;&gt; Steve Kinney: So

60
00:03:11.576 --> 00:03:15.117
我们已经有了点击监听器，我们将添加更多的事件。
we've got the click listener,
we're gonna add a few more events.

61
00:03:15.117 --> 00:03:22.479
我们将使用box.addEventListener(‘mouseenter’)。
We'll say
box.addEventListener('mouseenter').

62
00:03:22.479 --> 00:03:26.629
我想之前有人问过，mouseenter和
I think somebody asked earlier,
the difference between mouseenter and

63
00:03:26.629 --> 00:03:28.020
亲爱的。
mousemove.

64
00:03:28.020 --> 00:03:30.159
鼠标爱是有效的每次你悬停在它上面，
Mousemove is effectively every
time you're hovering over it,

65
00:03:30.159 --> 00:03:33.990
mouseenter就像鼠标进入该元素的边界一样。
mouseenter is like when the mouse
enters the bounds of that element.

66
00:03:33.990 --> 00:03:35.389
对，离开就是它离开的时候。
RIght, and leave will be when it leaves.

67
00:03:35.389 --> 00:03:38.759
因为我们不想一直这样做，我们只想第一次做
Cuz we don't wanna do this all the time,
we just wanna do it the first time it

68
00:03:38.759 --> 00:03:40.998
当它离开的时候，第一次想做一些不同的事情。
enters, and the first time wanna to do
something different when it leaves.

69
00:03:42.740 --> 00:03:49.343
很酷，所以我们说box.style.will Change=‘transform’。
Cool, and so we'll say
box.style.willChange = 'transform'.

70
00:03:49.343 --> 00:03:52.609
我们会成为这里的好公民，我们会告诉你老鼠什么时候离开。
And we're gonna be good citizens here, and
we're gonna say when the mouse leaves.

71
00:03:57.927 --> 00:03:58.793
&gt；&gt；Steve Kinney：鼠标离开。
&gt;&gt; Steve Kinney: mouseleave.

72
00:04:03.388 --> 00:04:04.772
&gt；&gt；Steve Kinney：我们将把它重新设置为
&gt;&gt; Steve Kinney: We'll set it back to

73
00:04:04.772 --> 00:04:07.550
在这种情况下，AUTO是默认值。
auto in this case, auto is the default.

74
00:04:07.550 --> 00:04:09.629
也可以将其设置为空字符串。
You could also set it to an empty string.

75
00:04:09.629 --> 00:04:15.539
我们可能稍后会这样做，但我只是将其设置为auto。
We'll probably do that maybe later,
but I'm just going to set it to auto.

76
00:04:15.539 --> 00:04:20.850
很酷，然后当过渡结束时，也是放下它的好时机。
Cool, and then when the transition ends,
that's also a good time to put it down.

77
00:04:20.850 --> 00:04:24.519
所以你可以说，box.addEventListener(‘transftionend’)。
So you could say,
box.addEventListener('transitionend').

78
00:04:24.519 --> 00:04:26.899
CSS转换和
It's really cool that
the CSS transitions and

79
00:04:26.899 --> 00:04:28.910
动画将触发JavaScript事件。
animations will trigger JavaScript events.

80
00:04:28.910 --> 00:04:30.742
所以你知道什么时候过渡或者
So you know when that transition or

81
00:04:30.742 --> 00:04:36.028
动画已经完成了。&gt；&gt；Steve Kinney：借口
that animation has completed.
&gt;&gt; Steve Kinney: Excuse

82
00:04:36.028 --> 00:04:40.802
当我学习打字的时候。&gt；&gt；steve kinney：好的，很酷
me as I learn how to type.
&gt;&gt; Steve Kinney: All right, cool, and

83
00:04:40.802 --> 00:04:41.846
我们会做同样的事。
we'll do the same thing.

84
00:04:50.706 --> 00:04:51.663
&gt；&gt；steve kinney：这一次，
&gt;&gt; Steve Kinney: And this time,

85
00:04:51.663 --> 00:04:54.177
我要重新打开油漆闪光。
I'm gonna turn back on paint flashing.

86
00:04:54.177 --> 00:04:57.079
你能看到悬停在它上面将它移动到它自己的层上吗？
Can you see hovering over it
moved it to its own layer.

87
00:04:57.079 --> 00:04:59.569
当我的鼠标进入和离开时，它移动了。
When my mouse entered and left, it moved.

88
00:04:59.569 --> 00:05:03.319
当我点击时，那里只有纯GPU动画。
When I click,
it's just pure GPU animation there.

89
00:05:03.319 --> 00:05:05.670
最后一个是我们进行了过渡
That final one was we put
on the transition and

90
00:05:05.670 --> 00:05:07.490
我们想再次被击倒。
that we wanted to be put back down again.

91
00:05:07.490 --> 00:05:10.290
但实际上在主线程上没有发生任何事情
But there's really nothing that
happens on the main thread

92
00:05:10.290 --> 00:05:11.810
当我们在做动画的时候。
as we're doing the animation.

93
00:05:11.810 --> 00:05:17.122
右，这意味着没有其他布局或样式重新计算或JavaScript或
Right, which means no other layouts or
style recalculations or JavaScript or

94
00:05:17.122 --> 00:05:21.963
任何其他正在发生的事情都将停止这种黄油般的平滑动画。
anything else going on is going to
stop that buttery smooth animation.

95
00:05:21.963 --> 00:05:24.185
酷，让我们来看看这层。
Cool, let's actually look
at that in the layers.

96
00:05:24.185 --> 00:05:27.481
如果这里没有图层标签，
And if you don't have
the layers tab up here, again,

97
00:05:27.481 --> 00:05:31.951
您只需转到这三个点，转到更多工具并查找图层，然后
you can just go to these three dots,
go to More Tools and find Layers, and

98
00:05:31.951 --> 00:05:35.928
那么它就会在那里。&gt；&gt；steve kinney：和
then it will be there.
&gt;&gt; Steve Kinney: And

99
00:05:35.928 --> 00:05:39.360
然后我喜欢在那里给自己一点旋转，
then I like to give myself just
a little bit of rotation there,

100
00:05:39.360 --> 00:05:44.255
好好享受一下吧。&gt；&gt；steve kinney：往前走，你可以看到，
treat myself to that.
&gt;&gt; Steve Kinney: Go ahead you can see,

101
00:05:44.255 --> 00:05:47.600
它在自己的层上，然后又向下。
it's up on its own layer,
and it's back down.

102
00:05:47.600 --> 00:05:52.709
它向上，它向下，我真的可以一整天都这样做，
It's up, it's down, it's up, it's down,
I could literally do that all day,

103
00:05:52.709 --> 00:05:54.659
我会尊重你的时间而不是。
I will respect your time and not.

104
00:05:54.659 --> 00:05:57.899
[笑]但我永远不会停止对此感到有趣和惊讶。
[LAUGH] But I will never cease
to be amused and amazed by that.

105
00:05:59.120 --> 00:06:01.110
好吧，酷，所以我们做到了。
All right, cool, so we did it.

106
00:06:01.110 --> 00:06:03.033
非常有用的一件事即将到来，
Very useful for one thing are about to,

107
00:06:03.033 --> 00:06:06.870
浏览器将处理哪些应该属于它自己的层，哪些不应该。
the browser will handle what deserves
its own layer and what doesn't.

108
00:06:06.870 --> 00:06:10.125
但你可以在听的时候给它推荐，
But you're allowed to give it
recommendations on listen,

109
00:06:10.125 --> 00:06:11.757
我在这里写了JavaScript。
I wrote the JavaScript here.

110
00:06:11.757 --> 00:06:15.610
我知道这里会发生什么，你为什么不做好准备呢？
I know what's about to happen here,
why don't you get ready for it?

111
00:06:15.610 --> 00:06:18.540
在这种情况下，你实际上可以节省很多钱。
And you can actually
save a lot in that case.

112
00:06:18.540 --> 00:06:21.000
是的，因为如果你是动画片的话，
And yeah,
cuz if you're animations are janky,

113
00:06:21.000 --> 00:06:23.259
为什么会有呢？&gt；&gt；扬声器2：我可以问一下吗？
why even have them?
&gt;&gt; Speaker 2: Can I ask

114
00:06:23.259 --> 00:06:24.439
一个问题？&gt；&gt；steve kinney：当然。
a question?
&gt;&gt; Steve Kinney: Of course.

115
00:06:24.439 --> 00:06:26.990
&gt；&gt；扬声器2：如果你有一个很重的
&gt;&gt; Speaker 2: If you have a really heavy

116
00:06:26.990 --> 00:06:33.199
元素页面，在Enter上是否更容易
element page,
would it be easier to just, on enter

117
00:06:33.199 --> 00:06:37.120
将该元素或其中一个元素转换为它的层，将其留在那里？
transform that element, or one of the
elements, to it's layer, leave it there?

118
00:06:37.120 --> 00:06:39.706
不必一直断断续续[CROSSTALK]只是
Instead of having to go on and
off all the time [CROSSTALK] just

119
00:06:39.706 --> 00:06:41.595
有点像拖动鼠标。&gt；&gt；Steve Kinney：如果
kind of drag your mouse around.
&gt;&gt; Steve Kinney: If it's

120
00:06:41.595 --> 00:06:45.189
会是一件永久性的事情，是的，对，做一些事情。
gonna be a permanent thing like,
yeah, right, doing stuff.

121
00:06:45.189 --> 00:06:49.199
但如果你想大多数事情，如果是这样的话，
But if you think about
most things if it is like,

122
00:06:49.199 --> 00:06:50.879
假设你在偷走东西。
let's say you're swiping things away.

123
00:06:50.879 --> 00:06:54.014
让我们说它就像一个特雷罗，对吧，或者其他类似的东西。
Let's say it's like a Trello, right,
or something along those lines.

124
00:06:54.014 --> 00:06:56.980
是的，你可以推广它，但你可以再次移动它。
Yeah, you can promote it,
but you could move it again.

125
00:06:56.980 --> 00:07:00.560
但随着用户继续使用该应用程序，并且您正在制作越来越多的应用程序
But as the user continues to use that app,
and you're making more and more and

126
00:07:00.560 --> 00:07:02.939
层数越多，成本就越高。
more layers, you run the cost.

127
00:07:02.939 --> 00:07:07.745
主线程和合成器线程有效地共享存储空间，
The main thread and the compositor
thread effectively share memory space,

128
00:07:07.745 --> 00:07:09.856
你可以用完的，对吧？
which you can run out of, right?

129
00:07:09.856 --> 00:07:12.216
所以像侧边栏这样的东西，一般规则应该是，
So stuff like a sidebar,
the general rule should be,

130
00:07:12.216 --> 00:07:15.649
完成后把所有东西都放回去，除非你有真正好的理由。
put everything back when you're done
unless you have a really good reason.

131
00:07:15.649 --> 00:07:18.839
所以他们会一直使用侧边栏，或者菜单，或者
So a sidebar that they're gonna interact
with all the time, or a menu, or

132
00:07:18.839 --> 00:07:23.170
也许，沿着这些路线的某些东西可能是一个例外。
something along those lines
might be an exception, maybe.

133
00:07:23.170 --> 00:07:27.221
但它应该非常明智地使用。
But it should be used like
incredibly judiciously.

134
00:07:27.221 --> 00:07:29.884
因为是的，如果它失去了控制，用户花了很多时间
Because yeah, if it gets out of control
and the user spends a lot of time on

135
00:07:29.884 --> 00:07:32.343
页面，最终你会创建越来越多的层。
the page, eventually you're gonna
create more and more layers.

136
00:07:32.343 --> 00:07:34.079
它会变得越来越成问题
It's gonna become increasingly problematic
