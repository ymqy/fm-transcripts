WEBVTT

1
00:00:00.390 --> 00:00:08.678
>> Brian Holt: 我希望您现在创建一个名为 carouse.js的新文件。
&gt;&gt; Brian Holt: I want you to go make
a new file now called carousel.js.

2
00:00:12.256 --> 00:00:13.910
>> 布莱恩 - 霍尔特: 所以你想做一个漂亮的卡鲁索
&gt;&gt; Brian Holt: So
you want to make like a nice Carousel so

3
00:00:13.910 --> 00:00:17.329
人们就喜欢看动物的各种照片，对吧 ?
that people can like see the various
different pictures of the animals, right?.

4
00:00:18.420 --> 00:00:22.847
首先我们要做的就是把 " 反应 " 从 " 反应 " 中
So first thing we're gonna do here is
we're gonna say import React from 'react'.

5
00:00:28.088 --> 00:00:34.875
>> Brian Holt: 然后我们会说类 Carousel 扩展了 React.Component。
&gt;&gt; Brian Holt: And then we're gonna say
class Carousel extends React.Component.

6
00:00:38.390 --> 00:00:41.240
> > Brian Holt: 好的，这会有两个我们要做的事情
&gt;&gt; Brian Holt: Okay, so
this is gonna have two things we're gonna

7
00:00:41.240 --> 00:00:44.289
有一系列的各种不同的图像
have an array of all the various
different images, and

8
00:00:44.289 --> 00:00:49.415
我们现在要展示的是活跃的活跃指数
we're gonna have which one we're currently
showing, the active one, the active index.

9
00:00:49.415 --> 00:00:55.072
所以我们会说国家的照片照片会是一个活跃的阵列
So we're gonna say state =, and
the photos is gonna be an active array,

10
00:00:55.072 --> 00:00:57.780
活动将会是一个数字。
and active is going to be a number.

11
00:00:57.780 --> 00:01:00.735
因此，我们将在缺省情况下选择第一个。
So we're gonna by default
select the first one.

12
00:01:10.623 --> 00:01:11.947
>> Brian Holt: 好的，然后我们继续
&gt;&gt; Brian Holt: Okay, and
then let's go ahead and

13
00:01:11.947 --> 00:01:18.218
渲染渲染， >> Brian Holt: 因此
make the render,
&gt;&gt; Brian Holt: So

14
00:01:18.218 --> 00:01:22.802
当我说合拍照片
when I say const photos and

15
00:01:22.802 --> 00:01:27.805
active = stats 状态和
active = the stats state and

16
00:01:27.805 --> 00:01:32.390
我们要回到一个
we are going to return a div

17
00:01:32.390 --> 00:01:36.776
类名 = carousel。
class name = carousel.

18
00:01:40.750 --> 00:01:45.703
>> Brian Holt: Carousel 是一个词，我越说越觉得奇怪，
&gt;&gt; Brian Holt: Carousel is a word that
the more I type the more it looks strange,

19
00:01:45.703 --> 00:01:49.757
我不知道我不明白我不明白
I just can't,
don't know I don't understand it.

20
00:01:49.757 --> 00:01:53.096
然后我们就会把你的照片和照片
Then we are gonna put and image and

21
00:01:53.096 --> 00:01:58.828
这个来源会和照片一样活跃对吧
the source is gonna be equal to photos,
active, right?

22
00:02:03.105 --> 00:02:07.108
> > 布莱恩 - 霍尔特( Brian Holt) : 所以，照片很活跃，这将会是一系列照片，
&gt;&gt; Brian Holt: So, photos active,
this is gonna be an array of photos and

23
00:02:07.108 --> 00:02:11.048
我选的第二个就是两个对吧
stuff I select the second one,
that will be two, right?

24
00:02:11.048 --> 00:02:11.979
我来选那个
And I'll select that one.

25
00:02:14.169 --> 00:02:18.808
然后，这里的备用文本将会被放置在动物或类似的东西上。
And then, the alt text here will put for
it is animal or something like that.

26
00:02:23.461 --> 00:02:30.383
>> Brian Holt: 然后，我们将输入类名 = carousel- 更小。
&gt;&gt; Brian Holt: And then we are gonna
put do class name = carousel- smaller.

27
00:02:35.275 --> 00:02:39.317
> > Brian Holt: 接下来我们将把
&gt;&gt; Brian Holt: And
then here inside of that we are gonna put

28
00:02:39.317 --> 00:02:44.097
photos.map ， >> Brian Holt: And
photos.map,
&gt;&gt; Brian Holt: And

29
00:02:44.097 --> 00:02:47.759
然后映射有两个它提供的参数。
then map has two parameters
that it provides.

30
00:02:47.759 --> 00:02:50.360
其中一个是照片吧
One of them is the photo, right?

31
00:02:50.360 --> 00:02:53.659
但它也给了你一个第二个指数。
But it also gives you a second
one that is the index.

32
00:02:53.659 --> 00:02:58.746
所以当你抓住那个指数的时候， >> Brian Holt:
So when you grab that index as well,
&gt;&gt; Brian Holt: And

33
00:02:58.746 --> 00:03:01.239
然后我们就会在这里做个暗示
then we're gonna do
an implicit return here.

34
00:03:07.770 --> 00:03:11.397
>> Brian Holt: 如果我们更加关注越好
&gt;&gt; Brian Holt: If we were
being more attentive to better

35
00:03:11.397 --> 00:03:14.659
可访问性实践在这里。
accessibility practice is here.

36
00:03:14.659 --> 00:03:16.930
也许我们要做的就是做这个小按钮对吧
Probably what we'll do is to
make this little button, right?

37
00:03:16.930 --> 00:03:18.770
比如看到我们点击更小的按钮
Like to see we'll click on
the smaller buttons and

38
00:03:18.770 --> 00:03:20.800
这会导致这里的互动
that would cause an interaction over here.

39
00:03:20.800 --> 00:03:23.316
用于处理焦点的 Cutz 按钮
Cuz buttons handle focus a lot better for

40
00:03:23.316 --> 00:03:26.572
只是时间上的问题不在生产上
just the sake of time don't
do this in production but

41
00:03:26.572 --> 00:03:31.090
我要让你直接把事件收听者直接放在图像上
I'm gonna show you just to put the event
listener directly on the image.

42
00:03:32.698 --> 00:03:34.158
>> 布莱恩 - 霍尔特:
&gt;&gt; Brian Holt: So
the key is gonna be the photo.

43
00:03:35.824 --> 00:03:38.675
>> Brian Holt: 然后单击要对其执行某些操作的 onClick 。
&gt;&gt; Brian Holt: And then onClick where
gonna have to do something with that.

44
00:03:38.675 --> 00:03:43.478
所以我们要说 " handleIndexClick"
So we're gonna say this.handleIndexClick,

45
00:03:43.478 --> 00:03:47.444
我们将在这里短暂地建造
which we will build here momentarily.

46
00:03:49.882 --> 00:03:53.512
>> Brian Holt: 当您为其提供数据索引时，以及我们要执行的操作
&gt;&gt; Brian Holt: When you give it the data-
index, and what we're gonna do with

47
00:03:53.512 --> 00:03:58.033
如果有人单击该按钮，那么会在此处而不是句柄索引中单击。
this is here instead of the handle index
click if someone clicks on the button,

48
00:03:58.033 --> 00:04:01.349
然后我们就把索引从这里的图像中提取出去
then we're going to pull
the index off of the image here.

49
00:04:01.349 --> 00:04:09.456
这是源 equals photo className =。
This is source equals photo className =.

50
00:04:09.456 --> 00:04:16.699
因此，如果索引是 triple = 活动的，那么我们想给它一个活动的类。
So, if the index is triple = to the active
then we want to give it an active class.

51
00:04:16.699 --> 00:04:21.718
要不我们就不去上课了，
Otherwise we don't wanna
give it a class okay,

52
00:04:21.718 --> 00:04:26.872
然后它就会成为动物的缩略图
and then the alt is going
to be animal thumbnail.

53
00:04:30.956 --> 00:04:33.997
> > Brian Holt: 好的，这会说你做了一件坏事
&gt;&gt; Brian Holt: Okay, and this is gonna say
you did a really bad thing just belong

54
00:04:33.997 --> 00:04:38.014
具有快速句柄的交互开发必须至少有一个键盘侦听器。
interact developments with quick handle
must have at least one keyboard listener.

55
00:04:41.997 --> 00:04:44.112
>> Brian Holt: 在这里，你可以做一些类似的事情。
&gt;&gt; Brian Holt: So
here you can do something like on.

56
00:04:45.800 --> 00:04:50.307
>> Brian Holt: 在关键操作或类似的操作上，
&gt;&gt; Brian Holt: On key op or
something like that,

57
00:04:50.307 --> 00:04:55.649
就像处理那样的事情
equals handle something like that.

58
00:04:55.649 --> 00:04:57.360
我们现在不会这么做的
We're not gonna do that right now.

59
00:04:57.360 --> 00:04:59.624
现在我们要忽略这一点
For now, we're just going to ignore this.

60
00:05:09.420 --> 00:05:12.223
> > Brian Holt: 我很愿意教人们你能做到这一点，
&gt;&gt; Brian Holt: I like hesitate to
teach people that you can do this,

61
00:05:12.223 --> 00:05:14.199
就像你可以忽略任何东西
it's like you can ignore anything,

62
00:05:14.199 --> 00:05:18.552
这些都是我的核心工作对你很不高兴
cuz one of these is eventually gonna be my
core work and am gonna be so upset at you.

63
00:05:22.127 --> 00:05:24.324
>> Brian Holt: 我过去做过，
&gt;&gt; Brian Holt: I went through and
did this correctly and

64
00:05:24.324 --> 00:05:28.262
得花很多时间才能在这方面获得正确的信息，所以现在
it takes a lot of time to get the
accessibility correct on this, so for now

65
00:05:28.262 --> 00:05:32.605
我想让你做正确的工作但我们现在就要开始行动了
I'm admonishing you to do it correctly,
but we're just gonna move on for now.

66
00:05:36.108 --> 00:05:39.310
>> Brian Holt: 好，现在我们必须进行该句柄 indexClick。
&gt;&gt; Brian Holt: Okay, so now we have
to go make this handle indexClick.

67
00:05:39.310 --> 00:05:41.855
让我们先做个出口，因为我总是忘了这个。
Let's go ahead and just do the export at
the bottom because I always forget this.

68
00:05:41.855 --> 00:05:47.334
因此，导出，缺省值， carousel，类似
So export, default, carousel, like so

69
00:05:47.334 --> 00:05:54.879
现在我们要去做个 " indexClick" 了
and then now we're gonna go
make the handle indexClick.

70
00:05:54.879 --> 00:05:58.230
好吧，让我们先说吧，这是个有趣的游戏。
Well, let's do the derive state
first this is kind of a fun one.

71
00:06:00.389 --> 00:06:05.100
照片会从父组件传递到轮播
So the photos are gonna be passed in from
the parent component into the carousel

72
00:06:05.100 --> 00:06:08.319
所以它不会在细节页里提出要求
ride, so it's not gonna get request in the
details page, it's gonna request that, and

73
00:06:08.319 --> 00:06:10.959
然后我们就会把它塞到车里了对吧
then we're going to set that
here in carousel, right?

74
00:06:12.160 --> 00:06:16.189
但这副会给我们一个大物体
But the pair is gonna give us a large
object full of lots of photos in

75
00:06:16.189 --> 00:06:18.709
各种大小的，其实就是想除草。
various different sizes and
they actually just want to weed out.

76
00:06:18.709 --> 00:06:20.418
这就是我们需要的大小。
So just the sizes that we need.

77
00:06:21.600 --> 00:06:28.396
我要展示如何使用静态的 getDerivedStateFromProps，
So, I'm gonna show you how to use
static getDerivedStateFromProps,

78
00:06:28.396 --> 00:06:31.904
我要把媒体拿掉
I'm gonna grab media out of this, so

79
00:06:31.904 --> 00:06:37.694
这是一种特殊的反应方法，它必须是静止的，好的。
this is a special react method
that it must be static, okay.

80
00:06:37.694 --> 00:06:41.086
它要做的是在一组道具中
And what it's gonna do is,
it's gonna take in a set of props and

81
00:06:41.086 --> 00:06:42.889
给你一个新的国家
give you back a new set of states.

82
00:06:44.620 --> 00:06:48.329
所以我要说让照片
So I'm gonna say let photos

83
00:06:48.329 --> 00:06:52.590
相当于另一个位置相关图片的新数组。
equals new array full of another
place correlate picture.

84
00:06:54.040 --> 00:07:00.889
就像这样 corgey.com/600x600
Place corgey.com/600x600 like that.

85
00:07:00.889 --> 00:07:05.762
因此，如果它没有任何图像，那么这将是缺省图像，好吗 ?
So this would be the default image
if it doesn't have any images, okay?

86
00:07:05.762 --> 00:07:09.507
否则，如果是 media.length，
Otherwise, if media.length,

87
00:07:09.507 --> 00:07:14.586
然后我想让你说照片
then I want you to say
photos = media.map and

88
00:07:14.586 --> 00:07:19.812
我要把所有的大照片都拿出来
I'm just gonna pull out
all the large photos.

89
00:07:22.968 --> 00:07:26.120
>> Brian Holt: Large 并返回。
&gt;&gt; Brian Holt: Large and return that.

90
00:07:29.334 --> 00:07:32.682
>> Brian Holt: 对，这些照片对象将具有小，中，大和
&gt;&gt; Brian Holt: Right, so these photo
objects will have small, medium, large and

91
00:07:32.682 --> 00:07:36.269
我们只是抓住他们的照片
full, and we're just grabbing
the large photos out of them.

92
00:07:36.269 --> 00:07:42.189
所以现在照片就是一系列的 URL ，好吗 ?
So now photos will just be
an array of strings of URLs, okay?

93
00:07:42.189 --> 00:07:45.709
然后我们就会把我们想要的东西
Then down here we're going to return
whatever object that we want to be merged

94
00:07:45.709 --> 00:07:46.459
进入了国家
into the state.

95
00:07:46.459 --> 00:07:49.449
我们会说回来的照片
So we're gonna say return photos.

96
00:08:00.610 --> 00:08:03.723
>> Brian Holt: 因此， getDerivedStateFromProps 再次发生
&gt;&gt; Brian Holt: So, again,
getDerivedStateFromProps takes in a set

97
00:08:03.723 --> 00:08:09.050
属性，对其进行过滤，然后将其传递到组件。
of properties, does some filtering on them
and then passes that on to the component.

98
00:08:09.050 --> 00:08:12.480
所以这个组件根本不会看到媒体的道具。
So this component's actually
never gonna see the media props.

99
00:08:12.480 --> 00:08:14.089
永远都不会用的对吧
It's never really gonna use them, right?

100
00:08:14.089 --> 00:08:17.470
会用这种照片来保持状态
It's gonna use this photos
which is gonna keep in state.

101
00:08:17.470 --> 00:08:23.240
因此，如果您有任何派生的状态，那么这是处理这些情况的好方法。
So if you have any derived state, this is
a good way to handle those situations.

102
00:08:23.240 --> 00:08:24.790
你不必这么做的
You don't have to do it this way.

103
00:08:24.790 --> 00:08:28.649
我完全可以在这里说而不是照片的地图
I totally could have come down here and
said, instead of photos dot map,

104
00:08:28.649 --> 00:08:34.370
我就会说这个停停的计划
I would have said this
stop props.media.map.

105
00:08:34.370 --> 00:08:41.046
然后我就会把照片里的照片和照片都给我
And then here I'll set photo.large and
photo.large.

106
00:08:41.046 --> 00:08:45.398
如果你觉得这是个好主意我就把它留给你
I'll leave it to you decide if you
think this is a good idea or not,

107
00:08:45.398 --> 00:08:50.544
我喜欢它是因为它把一些逻辑抽象化成了这种处理程序
I like it because it abstracts out some
of the logic into this kind of handler,

108
00:08:50.544 --> 00:08:53.309
但是 > > 布莱恩 - 霍尔特:
but
&gt;&gt; Brian Holt: Up to you.
