WEBVTT

1
00:00:00.360 --> 00:00:03.470
&gt；&gt；steve kinney：好的，很酷，让我们来看看，我们发现了什么？
&gt;&gt; Steve Kinney: All right, cool, so
let's take a look, what do we find?

2
00:00:03.470 --> 00:00:06.719
我们有没有从运行一些测试中得到任何初步的注意？
Do we have any first noticings
from running some of the tests?

3
00:00:08.400 --> 00:00:14.029
&gt；&gt；steve kinney：我们注意到的任何事情，我们都可以一起做。
&gt;&gt; Steve Kinney: Anything we noticed,
we can do some of it together.

4
00:00:14.029 --> 00:00:20.987
我们看到，当我们删除点x时，它比删除点y慢得多。
We saw that when we deleted point x,
it was way slower than deleting point y.

5
00:00:20.987 --> 00:00:23.512
三角测量有点困难，
It was kinda hard to triangulate whyy,

6
00:00:23.512 --> 00:00:26.960
因为为什么其中一个比另一个慢，对吗？
cuz why is one of these
slower than the other, right?

7
00:00:26.960 --> 00:00:31.811
但是当我们和三个人一起做的时候，我们可以想出一个办法，
But when we do it with three,
we can kinda like figure out,

8
00:00:31.811 --> 00:00:34.880
其中一个和另一个不一样，而且
one of this is not like the other, and

9
00:00:34.880 --> 00:00:38.680
找出这三个人中哪个是怪人。
figure out which of
the three is the oddball.

10
00:00:38.680 --> 00:00:41.600
是删除x，第一个，
Is deleting x, the first one,

11
00:00:41.600 --> 00:00:44.136
古怪的人，还是正在删除y，第二个，古怪的人？
the oddball, or is deleting y,
the second one, the oddball?

12
00:00:44.136 --> 00:00:48.170
但我们不知道，但当我们有三个的时候，你就能知道谁错了。
But we don't know, but when we have three,
you can figure out who's wrong.

13
00:00:48.170 --> 00:00:51.859
所以让我们继续，让我们尝试一下，让我继续。
So let's go ahead,
let's try it out, let me go ahead.

14
00:00:51.859 --> 00:00:55.719
我有Point(2，4，6)，我有我的构造函数。
I have Point (2, 4, 6),
I've got my constructor.

15
00:00:55.719 --> 00:00:58.600
让我继续保存并运行它。
Let me go ahead and save it and run it.

16
00:01:00.909 --> 00:01:06.884
&gt；&gt；Steve Kinney：好吧，所以删除x肯定还是很慢的，
&gt;&gt; Steve Kinney: All right, so
deleting x was definitely still slow,

17
00:01:06.884 --> 00:01:09.549
这一点没有改变。
that hasn't changed.

18
00:01:14.177 --> 00:01:21.090
&gt；&gt；Steve Kinney：删除y以前很快，现在很慢。
&gt;&gt; Steve Kinney: Deleting y was
fast before, it's now slow.

19
00:01:23.468 --> 00:01:28.522
&gt；&gt；Steve Kinney：删除z，&gt；&gt；Steve Kinney：is，
&gt;&gt; Steve Kinney: Deleting z,
&gt;&gt; Steve Kinney: Is,

20
00:01:28.522 --> 00:01:31.659
再来一次，对吗？
again, fast again,right?

21
00:01:31.659 --> 00:01:38.841
所以以前，当我们只有x和y，&gt；&gt；Steve Kinney：x很慢，
So before, when we only had x and y,
&gt;&gt; Steve Kinney: x was slow,

22
00:01:38.841 --> 00:01:42.280
Y和其他一切都差不多。
y was about the same as everything else.

23
00:01:42.280 --> 00:01:45.099
当我们加上z时，z是快的，其他两个是慢的。
When we added z, z was fast and
the other two were slow.

24
00:01:45.099 --> 00:01:48.979
我们准备好做出假设了吗？
Are we ready to make a hypothesis yet?

25
00:01:48.979 --> 00:01:51.478
就是这样，x很慢，或者
Which is it, that x was slow, or

26
00:01:51.478 --> 00:01:56.859
当我们第一次看到它的时候y是可疑的快，现在z是？
that y was suspiciously fast when we
first looked at it, and now z is?

27
00:01:56.859 --> 00:02:02.180
对，在我看来，如果我们删除最后一个，我们就没事了。
Right, seems to me that if we
delete the last one, we're okay.

28
00:02:02.180 --> 00:02:05.037
如果我们删除第一个或第二个，
If we delete any of the first or
second ones,

29
00:02:05.037 --> 00:02:08.680
我们突然变得慢了很多，这公平吗？
we all of sudden have gotten a lot slower,
is that fair?

30
00:02:08.680 --> 00:02:12.400
对，有趣，对，这不应该真的很重要。
Right, interesting, right,
it shouldn't really matter.

31
00:02:12.400 --> 00:02:17.091
它实际上，只是有趣的历史事实，它曾经是，从来不删除任何东西，因为
It actually, just fun historical fact, it
used to be, never delete anything because

32
00:02:17.091 --> 00:02:20.710
删除任何属性都会减慢对象的速度。
deleting any of the properties
would have slowed the object down.

33
00:02:20.710 --> 00:02:24.687
对，这是真的，在涡扇之前，有曲轴，而且
Right, and that was true, before Turbofan,
there was Crankshaft, and

34
00:02:24.687 --> 00:02:28.300
如果删除任何属性，曲轴将变慢。
Crankshaft would get slower if you
deleted any of the properties.

35
00:02:28.300 --> 00:02:31.829
涡扇稍微聪明一点，知道你是否删除了最后一个，
Turbofan is slightly smart enough
to know if you delete the last one,

36
00:02:31.829 --> 00:02:35.379
很多时候就是你要删除的那个，它针对这种情况进行了优化。
which a lot of times is the one you're
deleting, it's optimized for that case.

37
00:02:35.379 --> 00:02:39.074
但是删除属性很慢，这就像，谁在乎呢？
But deleting properties is slow,
which is like, who cares?

38
00:02:39.074 --> 00:02:42.110
JavaScript是一种动态语言，对吧，它不应该真的很重要。
JavaScript's a dynamic language,
right, it shouldn't really matter.

39
00:02:42.110 --> 00:02:45.609
我们有一定的洞察力来了解字符串和
We have some amount of insight
to know that strings and

40
00:02:45.609 --> 00:02:48.270
数字绝对起了作用。
numbers definitely made a difference.

41
00:02:48.270 --> 00:02:51.496
我们看到Turbofan能够标记一些优化的东西，并且
We saw Turbofan be able to mark
something for optimization, and

42
00:02:51.496 --> 00:02:53.360
然后必须去优化它，对吗？
then have to deoptimize it, right?

43
00:02:53.360 --> 00:02:57.199
所以几乎就像有一个类型系统在适当的地方。
So it's almost like there's
a type system in place.

44
00:02:57.199 --> 00:03:02.620
我没有看到一个类型系统，对吧，我没有写流程或原因ML或打字稿。
I don't see a type system, right, I'm not
writing flow or reason ML or typescript.

45
00:03:02.620 --> 00:03:06.009
但我确实感受到了一些影响。
But I'm definitely feeling
some of the effects of this.

46
00:03:06.009 --> 00:03:10.039
而是一个可以具有所有这些不同属性的对象
But an object that could have all
these different properties on

47
00:03:10.039 --> 00:03:13.927
它不同于字符串或数字。
it is different than something
that's a string or a number.

48
00:03:13.927 --> 00:03:17.265
对，所以我从一些科学研究中感觉到了这一点，
Right, so I'm sensing this from
doing some of the science,

49
00:03:17.265 --> 00:03:20.020
但我还不完全知道发生了什么。
but I don't totally know
what's happening yet.

50
00:03:20.020 --> 00:03:26.840
让我做另一个小实验，我们将拿一堆物体。
Let me do another little experiment, and
we're gonna take a bunch of objects.

51
00:03:28.009 --> 00:03:31.099
我们会稍微回到加法，
We're gonna go back to
addition a little bit,

52
00:03:31.099 --> 00:03:34.409
因为谁不喜欢一些老式的加法？
cuz who doesn't like some
good old fashioned addition?

53
00:03:34.409 --> 00:03:36.050
我们会继续，我们会拿一堆东西。
We'll go ahead,
we'll take a bunch of objects.

54
00:03:36.050 --> 00:03:40.780
我们说的是常量对象，我只是要做一堆相同的对象。
We'll say const objects, and I'm just
gonna make a bunch of the same objects.

55
00:03:40.780 --> 00:03:45.188
我会说a是1，a是2，
I'll say a is 1, a is 2,

56
00:03:45.188 --> 00:03:50.800
A是3，A是4，所以这些非常
a is 3, a is 4, so these are very

57
00:03:50.800 --> 00:03:55.420
相似的物体。
similar looking objects.

58
00:03:55.420 --> 00:03:59.990
对，他们都有一个属性，一个属性总是一个数字。
Right, they all have an a property,
that a property is always a number.

59
00:03:59.990 --> 00:04:02.967
对，希望你能做出一些假设
Right, hopefully you're making some
assumptions about what's gonna

60
00:04:02.967 --> 00:04:03.560
发生在这里。
happen here.

61
00:04:03.560 --> 00:04:08.909
对，就像，相似的东西好，不同的东西不好。
Right, it's like, similar things good,
different things bad.

62
00:04:08.909 --> 00:04:12.993
对，所以拿着这个
Right, so take that and

63
00:04:12.993 --> 00:04:19.740
我们继续说，设sum=0。
we'll go ahead and say, let sum = 0.

64
00:04:19.740 --> 00:04:21.550
我们会得到一个物体。
We'll get one of the objects.

65
00:04:31.740 --> 00:04:35.629
&gt；&gt；Steve Kinney：这将有效地，迭代通过它。
&gt;&gt; Steve Kinney: This will effectively
just, iterations move through it.

66
00:04:35.629 --> 00:04:38.500
它将有效地结束为0，1，2，3，这将是索引。
It'll effectively end up being 0,
1, 2, 3, which'll be the indices.

67
00:04:38.500 --> 00:04:41.340
所以我们要用这个旋转物体。
So we're just gonna rotate
through the objects with this.

68
00:04:41.340 --> 00:04:46.292
&gt；&gt；Steve Kinney：我们会说总和等于总和
&gt;&gt; Steve Kinney: And
we'll say sum equals sum

69
00:04:46.292 --> 00:04:51.951
加上，&gt；&gt；Steve Kinney：a property
plus,
&gt;&gt; Steve Kinney: The a property

70
00:04:51.951 --> 00:04:53.759
那个物体的。
of that object.

71
00:04:53.759 --> 00:04:56.237
对，所以要经过多少次，对吧，
Right, so go through, for
however many times, right,

72
00:04:56.237 --> 00:04:57.899
我们要检查这些物体。
we're gonna go through the objects.

73
00:04:57.899 --> 00:05:00.555
我们要添加a属性，我们要添加a属性，
We're gonna add the a property,
we're gonna add the a property,

74
00:05:00.555 --> 00:05:03.084
我们要一遍又一遍地添加a属性。
we're gonna add the a property,
over and over and over again.

75
00:05:03.084 --> 00:05:04.625
让我们看看我们得到了什么。
Let's see what we get.

76
00:05:06.370 --> 00:05:08.877
&gt；&gt；steve kinney：好的，大约花了9毫秒，
&gt;&gt; Steve Kinney: All right,
took about nine milliseconds,

77
00:05:08.877 --> 00:05:11.322
我相信我们可以回到1E7。
I feel confident we can go back up to 1E7.

78
00:05:13.887 --> 00:05:16.408
&gt；&gt；steve kinney：好的，26，对，
&gt;&gt; Steve Kinney: All right, 26, right,

79
00:05:16.408 --> 00:05:21.250
显然这里的伸缩性很好，好的，还不错。
clearly scaling pretty well here,
okay, not bad.

80
00:05:21.250 --> 00:05:23.495
我们继续吧，我们要保留他们所有人的财产，
Let's go ahead, we're gonna keep
an a property on all of them,

81
00:05:23.495 --> 00:05:26.300
因为这个代码理论上会，我甚至不知道如果我们输了会发生什么。
cuz this code would theoretically,
I don't even know what happens if we lose.

82
00:05:26.300 --> 00:05:31.290
我猜未定义者被强迫进入NaN，没有人愿意走这条路。
I guess undefined gets coerced into NAN,
nobody wants to go down that road.

83
00:05:31.290 --> 00:05:33.240
所以我们会保留他们所有人的财产。
So we'll keep an a property
on all of them.

84
00:05:33.240 --> 00:05:36.720
但也许有时候我们在一个物体上添加了一些东西，
But maybe sometimes we added
some stuff to an object,

85
00:05:36.720 --> 00:05:40.255
有时我们从对象中删除一些内容，事情发生在JavaScript中。
sometimes we deleted some stuff from
an object, things happen in JavaScript.

86
00:05:40.255 --> 00:05:44.158
对，我们的代码是一个狂野的地方，事情一直在变化。
Right, our code's a wild, wild place,
things are changing all the time.

87
00:05:44.158 --> 00:05:46.846
我们从数据库中得到了不同的数据，而且
We've got back different
data from the database, and

88
00:05:46.846 --> 00:05:49.720
他们中的一些人有这些属性，有些人没有。
some of them have these properties,
some of them don't.

89
00:05:49.720 --> 00:05:53.129
所以我们会继续说，给这个a，b属性。
So we'll go ahead and say,
give this one a b property.

90
00:05:55.372 --> 00:06:01.749
&gt；&gt；Steve Kinney：在这里我们说，&gt；&gt；Steve Kinney：让我们
&gt;&gt; Steve Kinney: Here we'll say,
&gt;&gt; Steve Kinney: Let's

91
00:06:01.749 --> 00:06:02.759
让他们与众不同。
make them different.

92
00:06:07.430 --> 00:06:08.766
&gt；&gt；Steve Kinney：好的，我们将再次运行此代码。
&gt;&gt; Steve Kinney: All right,
we'll run this code again.

93
00:06:11.680 --> 00:06:14.487
&gt；&gt；steve kinney：好的，又是几毫秒，但是
&gt;&gt; Steve Kinney: All right, that's,
again, a few milliseconds, but

94
00:06:14.487 --> 00:06:18.567
这绝对是一个明显的差异，那是20%的长，对吗？
that's definitely a noticeable difference,
that's 20% longer, right?
